Created a code block to execute some javascript on the json values which failed the if block.

let items = $input.all();
let totalBooked = items.length;
let bookedSum = 0;

for (let i=0; i < items.length; i++) {
  bookedSum = bookedSum + items[i].json.orderPrice;
}

return [{ json: {totalBooked, bookedSum} }];

From Chat GPT this is how the code works:

Here’s what that n8n code does, step by step, and an equivalent in Python.

## What the n8n code does

javascript

```
let items = $input.all();let totalBooked = items.length;let bookedSum = 0;for (let i=0; i < items.length; i++) {  bookedSum = bookedSum + items[i].json.orderPrice;}return [{ json: {totalBooked, bookedSum} }];
```

1. `let items = $input.all();`
    - Gets all incoming items to this node.
    - In n8n, each `item` looks like:
        
        json
        
        ```
        {  "json": {    "orderPrice": 123.45,    ...  }}``
        ```
        
2. `let totalBooked = items.length;`
    
    - Counts how many items came in (number of orders, for example).
3. `let bookedSum = 0;`
    
    - Initializes a running total.
4. The `for` loop:
    
    javascript
    
    ```
    for (let i=0; i < items.length; i++) {  bookedSum = bookedSum + items[i].json.orderPrice;}
    ```
    
    - Loops over each item.
    - Reads `orderPrice` from each item’s `json`.
    - Adds it to `bookedSum`, so you end up with the total of all order prices.
5. `return [{ json: {totalBooked, bookedSum} }];`
    
    - Returns a single output item with:
        - `totalBooked`: how many items
        - `bookedSum`: sum of all `orderPrice` values
    - So the output item is:
        
        json
        
        ```
        {  "json": {    "totalBooked": <number of items>,    "bookedSum": <sum of orderPrice>  }}
        ```
        

---

## Equivalent logic in Python

Assume `items` has the same structure as in n8n:

python

```
items = [    {"json": {"orderPrice": 10}},    {"json": {"orderPrice": 20}},    {"json": {"orderPrice": 30}},]
```

### Direct Python equivalent

python

```
items = get_input_items()  # placeholder for however you receive itemstotalBooked = len(items)bookedSum = 0for item in items:    bookedSum = bookedSum + item["json"]["orderPrice"]result = [{"json": {"totalBooked": totalBooked, "bookedSum": bookedSum}}]
```

You could also write it more “Pythonic” as:

python

```
items = get_input_items()totalBooked = len(items)bookedSum = sum(item["json"]["orderPrice"] for item in items)result = [{"json": {"totalBooked": totalBooked, "bookedSum": bookedSum}}]
```

If you tell me how you’re getting `items` in your Python environment (e.g., from an API, file, or within n8n’s Python Code node), I can tailor this snippet to your exact use case.

CopyRegenerate response